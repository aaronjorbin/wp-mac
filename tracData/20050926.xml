<?xml version="1.0"?>
<rss xmlns:dc="http://purl.org/dc/elements/1.1/" version="2.0">
  <channel>
    <title>WordPress Trac</title>
    <link>http://core.trac.wordpress.org/timeline</link>
    <description>Trac Timeline</description>
    <language>en-US</language>
    <generator>Trac 1.2.2</generator>
    <image>
      <title>WordPress Trac</title>
      <url>http://core.trac.wordpress.org/chrome/site/your_project_logo.png</url>
      <link>http://core.trac.wordpress.org/timeline</link>
    </image>
    <item>
      <title>Ticket #1710 (Image Uploading Widget) closed</title>
      
        <dc:creator>ryan</dc:creator>

      <pubDate>Mon, 26 Sep 2005 23:55:38 GMT</pubDate>
      <link>http://core.trac.wordpress.org/ticket/1710</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/ticket/1710/1127778938000000</guid>
      <description>fixed: &lt;p&gt;
(In &lt;a class="changeset" href="http://core.trac.wordpress.org/changeset/2921" title="Image uploading widget from skeltoac.  fixes #1710"&gt;[2921]&lt;/a&gt;) Image uploading widget from skeltoac.  fixes &lt;a class="closed ticket" href="http://core.trac.wordpress.org/ticket/1710" title="#1710: enhancement: Image Uploading Widget (closed: fixed)"&gt;#1710&lt;/a&gt;
&lt;/p&gt;
</description>
      <category>closedticket</category>
    </item><item>
      <title>Changeset [2921]: Image uploading widget from skeltoac.  fixes #1710</title>
      
        <dc:creator>ryan</dc:creator>

      <pubDate>Mon, 26 Sep 2005 23:55:36 GMT</pubDate>
      <link>http://core.trac.wordpress.org/changeset/2921</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/changeset/2921/1127778936661736</guid>
      <description>&lt;p&gt;
Image uploading widget from skeltoac.  fixes &lt;a class="closed ticket" href="http://core.trac.wordpress.org/ticket/1710" title="#1710: enhancement: Image Uploading Widget (closed: fixed)"&gt;#1710&lt;/a&gt;
&lt;/p&gt;
</description>
      <category>changeset</category>
    </item><item>
      <title>Ticket #1710 (Image Uploading Widget) updated</title>
      
        <dc:creator>skeltoac</dc:creator>

      <pubDate>Mon, 26 Sep 2005 22:52:43 GMT</pubDate>
      <link>http://core.trac.wordpress.org/ticket/1710</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/ticket/1710/1127775163000000</guid>
      <description>&lt;p&gt;
Re: Save And Continue Editing bug
&lt;/p&gt;
&lt;p&gt;
If I close the widget then reposition it and open it again, the uploading script comes back. Weird. Moving the widget can cause problems in IE, too. Maybe better put it below the widgets.
&lt;/p&gt;
</description>
      <category>editedticket</category>
    </item><item>
      <title>Ticket #1710 (Image Uploading Widget) updated</title>
      
        <dc:creator>skeltoac</dc:creator>

      <pubDate>Mon, 26 Sep 2005 22:43:40 GMT</pubDate>
      <link>http://core.trac.wordpress.org/ticket/1710</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/ticket/1710/1127774620000000</guid>
      <description>&lt;p&gt;
One known issue is in WinFF, clicking Save And Continue Editing, the image uploading iframe gets populated by the contents of the preview iframe. It doesn't happen in WinIE, so I guess its a browser bug. This needs to be verified, and a solution worked out if possible.
&lt;/p&gt;
</description>
      <category>editedticket</category>
    </item><item>
      <title>image-uploading.php attached to Ticket #1710</title>
      
        <dc:creator>skeltoac</dc:creator>

      <pubDate>Mon, 26 Sep 2005 22:42:21 GMT</pubDate>
      <link>http://core.trac.wordpress.org/attachment/ticket/1710/image-uploading.php</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/attachment/ticket/1710/image-uploading.php/1127774541000000</guid>
      <description>&lt;p&gt;
Works for me... mostly ;-)
&lt;/p&gt;
</description>
      <category>attachment</category>
    </item><item>
      <title>image-uploading.diff attached to Ticket #1710</title>
      
        <dc:creator>skeltoac</dc:creator>

      <pubDate>Mon, 26 Sep 2005 22:41:54 GMT</pubDate>
      <link>http://core.trac.wordpress.org/attachment/ticket/1710/image-uploading.diff</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/attachment/ticket/1710/image-uploading.diff/1127774514000000</guid>
      <description>&lt;p&gt;
SVN di
&lt;/p&gt;
</description>
      <category>attachment</category>
    </item><item>
      <title>Ticket #1710 (Image Uploading Widget) created</title>
      
        <dc:creator>skeltoac</dc:creator>

      <pubDate>Mon, 26 Sep 2005 22:40:34 GMT</pubDate>
      <link>http://core.trac.wordpress.org/ticket/1710</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/ticket/1710/1127774434000000</guid>
      <description>&lt;p&gt;
Lots of changes here. Be sure to run upgrade.php because a column must be added to wp_posts.
&lt;/p&gt;
</description>
      <category>newticket</category>
    </item><item>
      <title>Changeset [2920]: Validate!</title>
      
        <dc:creator>matt</dc:creator>

      <pubDate>Mon, 26 Sep 2005 17:21:51 GMT</pubDate>
      <link>http://core.trac.wordpress.org/changeset/2920</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/changeset/2920/1127755311031440</guid>
      <description>&lt;p&gt;
Validate!
&lt;/p&gt;
</description>
      <category>changeset</category>
    </item><item>
      <title>Ticket #1549 (wysiwyg editor errors) updated</title>
      
        <dc:creator>mark</dc:creator>

      <pubDate>Mon, 26 Sep 2005 16:31:23 GMT</pubDate>
      <link>http://core.trac.wordpress.org/ticket/1549</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/ticket/1549/1127752283000000</guid>
      <description>&lt;p&gt;
Strange behavior.  I don't get the same results as you; click either the ordered or unordered list button causes the cursor to lose focus on the entry area; clicking back in the text area and clicking a list button does the same.
&lt;/p&gt;
</description>
      <category>editedticket</category>
    </item><item>
      <title>Ticket #1524 (Using ' instead of " in &lt;img/&gt; tags) updated</title>
      
        <dc:creator>mark</dc:creator>

      <pubDate>Mon, 26 Sep 2005 16:18:16 GMT</pubDate>
      <link>http://core.trac.wordpress.org/ticket/1524</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/ticket/1524/1127751496000000</guid>
      <description>&lt;p&gt;
As Mark Jaquith said, but I added something:  the devs can always reject the patch :P
&lt;/p&gt;
</description>
      <category>editedticket</category>
    </item><item>
      <title>Changeset [2919]: We had reverted this fix from [1253]</title>
      
        <dc:creator>matt</dc:creator>

      <pubDate>Mon, 26 Sep 2005 16:06:58 GMT</pubDate>
      <link>http://core.trac.wordpress.org/changeset/2919</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/changeset/2919/1127750818751175</guid>
      <description>&lt;p&gt;
We had reverted this fix from &lt;a class="changeset" href="http://core.trac.wordpress.org/changeset/1253" title="Fix so KSES works with Japanese encoding.
"&gt;[1253]&lt;/a&gt;
&lt;/p&gt;
</description>
      <category>changeset</category>
    </item><item>
      <title>Ticket #1708 (Typo with $object-&gt;property statements causes PHP5 to give fatal errors.) updated</title>
      
        <dc:creator>westi</dc:creator>

      <pubDate>Mon, 26 Sep 2005 15:56:25 GMT</pubDate>
      <link>http://core.trac.wordpress.org/ticket/1708</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/ticket/1708/1127750185000000</guid>
      <description>&lt;i&gt;Keywords&lt;/i&gt; changed&lt;br/&gt;</description>
      <category>editedticket</category>
    </item><item>
      <title>Changeset [2918]: Shhhh windows</title>
      
        <dc:creator>matt</dc:creator>

      <pubDate>Mon, 26 Sep 2005 15:50:08 GMT</pubDate>
      <link>http://core.trac.wordpress.org/changeset/2918</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/changeset/2918/1127749808757946</guid>
      <description>&lt;p&gt;
Shhhh windows
&lt;/p&gt;
</description>
      <category>changeset</category>
    </item><item>
      <title>Ticket #1663 (User privilege escalation :: Users can use XSS/XSRF to boost from lvl ...) updated</title>
      
        <dc:creator>WhiteAcid</dc:creator>

      <pubDate>Mon, 26 Sep 2005 14:50:31 GMT</pubDate>
      <link>http://core.trac.wordpress.org/ticket/1663</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/ticket/1663/1127746231000000</guid>
      <description>&lt;p&gt;
Sorry it's taken so long to reply, I've had a temporary self-imposed ban from computers.
&lt;/p&gt;
&lt;p&gt;
@nbachiyski, I can't believe I didn't think of that. Well... checking image extensions is maybe a start, although you could still link to a remote png/jpg/gif file and use a .htaccess file to run PHP. markjaquith's suggestion is good, but as you pointed out you don't need JavaScript to do this attack.
&lt;/p&gt;
&lt;p&gt;
Don't bother with the refereals bit, that takes about 10 seconds to forge.
The only foolproof method I can think of is disallowing any remote images/objects/iframes to be loaded, this would involve some serious filtering and would seriously hamper the usability of WP.
&lt;/p&gt;
&lt;p&gt;
I don't see how using XMLHttpRequest would help cURL can make POST requests too.
&lt;/p&gt;
&lt;p&gt;
Wait, brainwave....
If you check file extensions for all remote objects and disallow JS, then nothing can be done. Your method wouldn't work as the file extension is wrong and mine wouldn't as JS wouldn't work. I can't see any other way of doing this.
&lt;/p&gt;
</description>
      <category>editedticket</category>
    </item><item>
      <title>plugin_missing_bug.patch attached to Ticket #1709</title>
      
        <dc:creator>michaelmoore</dc:creator>

      <pubDate>Mon, 26 Sep 2005 14:18:08 GMT</pubDate>
      <link>http://core.trac.wordpress.org/attachment/ticket/1709/plugin_missing_bug.patch</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/attachment/ticket/1709/plugin_missing_bug.patch/1127744288000000</guid>
      <description>&lt;p&gt;
Possible fix for improper plugin removal
&lt;/p&gt;
</description>
      <category>attachment</category>
    </item><item>
      <title>Ticket #1709 (Check for missing plugin files removes activating/deactivating plugin ...) created</title>
      
        <dc:creator>michaelmoore</dc:creator>

      <pubDate>Mon, 26 Sep 2005 14:17:25 GMT</pubDate>
      <link>http://core.trac.wordpress.org/ticket/1709</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/ticket/1709/1127744245000000</guid>
      <description>&lt;p&gt;
It appears that an erroneous usage of "$_GET&lt;a class="missing wiki"&gt;plugin?&lt;/a&gt;" instead of the appropriate foreach loop variable in wp-admin/plugins.php removes the incorrect item from the active_plugins option. A simple patch should be attached. Review is needed, since I'm not much of a PHP programmer.
&lt;/p&gt;
</description>
      <category>newticket</category>
    </item><item>
      <title>Ticket #1708 (Typo with $object-&gt;property statements causes PHP5 to give fatal errors.) updated</title>
      
        <dc:creator>splee</dc:creator>

      <pubDate>Mon, 26 Sep 2005 10:38:35 GMT</pubDate>
      <link>http://core.trac.wordpress.org/ticket/1708</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/ticket/1708/1127731115000000</guid>
      <description>&lt;i&gt;Priority&lt;/i&gt;, &lt;i&gt;Severity&lt;/i&gt; changed&lt;br/&gt;</description>
      <category>editedticket</category>
    </item><item>
      <title>trunk-object-property-typo.txt attached to Ticket #1708</title>
      
        <dc:creator>splee</dc:creator>

      <pubDate>Mon, 26 Sep 2005 10:21:07 GMT</pubDate>
      <link>http://core.trac.wordpress.org/attachment/ticket/1708/trunk-object-property-typo.txt</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/attachment/ticket/1708/trunk-object-property-typo.txt/1127730067000000</guid>
      <description>&lt;p&gt;
patch for the trunk
&lt;/p&gt;
</description>
      <category>attachment</category>
    </item><item>
      <title>1.5-object-property-typo.txt attached to Ticket #1708</title>
      
        <dc:creator>splee</dc:creator>

      <pubDate>Mon, 26 Sep 2005 10:19:21 GMT</pubDate>
      <link>http://core.trac.wordpress.org/attachment/ticket/1708/1.5-object-property-typo.txt</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/attachment/ticket/1708/1.5-object-property-typo.txt/1127729961000000</guid>
      <description>&lt;p&gt;
patch for the 1.5 branch
&lt;/p&gt;
</description>
      <category>attachment</category>
    </item><item>
      <title>Ticket #1708 (Typo with $object-&gt;property statements causes PHP5 to give fatal errors.) created</title>
      
        <dc:creator>splee</dc:creator>

      <pubDate>Mon, 26 Sep 2005 10:18:32 GMT</pubDate>
      <link>http://core.trac.wordpress.org/ticket/1708</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/ticket/1708/1127729912000000</guid>
      <description>&lt;p&gt;
I have attached diffs for both the 1.5 tag and the trunk code.
&lt;/p&gt;
&lt;p&gt;
PHP 5.0.5 gives the following error when get_settings() from wp-includes/functions.php is run under certain conditions (reproducable in the manage-&amp;gt;tags page when the UltimateTagWarrior plugin is installed):
&lt;/p&gt;
&lt;p&gt;
Fatal error: Cannot access empty property in /path/to/root/wp-includes/functions.php on line 246
&lt;/p&gt;
</description>
      <category>newticket</category>
    </item><item>
      <title>Changeset [2917]: A few cleanups from the upgrade.</title>
      
        <dc:creator>matt</dc:creator>

      <pubDate>Mon, 26 Sep 2005 07:13:48 GMT</pubDate>
      <link>http://core.trac.wordpress.org/changeset/2917</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/changeset/2917/1127718828309662</guid>
      <description>&lt;p&gt;
A few cleanups from the upgrade.
&lt;/p&gt;
</description>
      <category>changeset</category>
    </item><item>
      <title>Changeset [2916]: Updating to latest TinyMCE</title>
      
        <dc:creator>matt</dc:creator>

      <pubDate>Mon, 26 Sep 2005 06:52:30 GMT</pubDate>
      <link>http://core.trac.wordpress.org/changeset/2916</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/changeset/2916/1127717550735151</guid>
      <description>&lt;p&gt;
Updating to latest TinyMCE
&lt;/p&gt;
</description>
      <category>changeset</category>
    </item><item>
      <title>Ticket #1686 (CSS Security Vulnerability) updated</title>
      
        <dc:creator>hendry</dc:creator>

      <pubDate>Mon, 26 Sep 2005 00:26:19 GMT</pubDate>
      <link>http://core.trac.wordpress.org/ticket/1686</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/ticket/1686/1127694379000000</guid>
      <description>&lt;p&gt;
Ryan do you have an email?
&lt;/p&gt;
&lt;p&gt;
I am finding it a complete pain in the arse having to act as a "copy and paste" intermediary between Noam and this BTS.
&lt;/p&gt;
&lt;pre class="wiki"&gt;I am not sure how to update that site, but here is one example:
http://www.fuegodesigns.com/blog/?%22%3E%3Cscript%3Ealert(document.cookie)%3C/script%3E
If you access the above URL using Mozilla/IE you won't get anything to
trigger BUT, the source HTML will include:
&amp;lt;a href="http://www.fuegodesigns.com/blog/?%22%3E%3Cscript%3Ealert(document.cookie)%3C/script%3E&amp;amp;amp;paged=2"&amp;gt;Next
Page &amp;amp;raquo;&amp;lt;/a&amp;gt;&amp;lt;/span&amp;gt;
Accessing this URL via IE:
http://www.fuegodesigns.com/blog/?"&amp;gt;&amp;lt;script&amp;gt;alert(document.cookie)&amp;lt;/script&amp;gt;
Will return in IE the following HTML source:
a href="http://www.fuegodesigns.com/blog/?\"&amp;gt;&amp;lt;script&amp;gt;alert(document.cookie)&amp;lt;/script&amp;gt;&amp;amp;amp;paged=2"&amp;gt;Next
Page
On 9/23/05, Kai Hendry &amp;lt;hendry@iki.fi&amp;gt; wrote:
&amp;gt; On 2005-09-23T08:42+0200 Noam Rathaus wrote:
&amp;gt; &amp;gt; The problem is that wordpress embeds the data sent from the user
&amp;gt; &amp;gt; inside the response.
&lt;/pre&gt;</description>
      <category>editedticket</category>
    </item><item>
      <title>Ticket #1283 (Show caught spam comments) updated</title>
      
        <dc:creator>mark</dc:creator>

      <pubDate>Sun, 25 Sep 2005 21:17:34 GMT</pubDate>
      <link>http://core.trac.wordpress.org/ticket/1283</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/ticket/1283/1127683054000000</guid>
      <description>&lt;p&gt;
He wants it on the dashboard; why would it need to be a plugin hook?  If you want to use it across multiple plugins or more than once in a plugin you could define it in my-hacks.php (ugly!) and put:
&lt;/p&gt;
&lt;pre class="wiki"&gt;function list_caught_spam() {
    echo $wpdb-&amp;gt;get_var("SELECT COUNT(comment_ID) FROM $wpdb-&amp;gt;comments WHERE comment_approved = 'spam'");
}
&lt;/pre&gt;&lt;p&gt;
then just put &amp;lt;?php list_caught_spam(); ?&amp;gt; wherever you want it.
&lt;/p&gt;
</description>
      <category>editedticket</category>
    </item><item>
      <title>Ticket #1707 (Default rewrite rules do not work with non-standard http-port urls) closed</title>
      
        <dc:creator>mark</dc:creator>

      <pubDate>Sun, 25 Sep 2005 19:49:03 GMT</pubDate>
      <link>http://core.trac.wordpress.org/ticket/1707</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/ticket/1707/1127677743000000</guid>
      <description>invalid: &lt;p&gt;
Naturally I jumped the gun prematurely.  My apologizes.  This is not a present bug.
&lt;/p&gt;
</description>
      <category>closedticket</category>
    </item><item>
      <title>Ticket #1707 (Default rewrite rules do not work with non-standard http-port urls) updated</title>
      
        <dc:creator>mark</dc:creator>

      <pubDate>Sun, 25 Sep 2005 19:34:04 GMT</pubDate>
      <link>http://core.trac.wordpress.org/ticket/1707</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/ticket/1707/1127676844000000</guid>
      <description>&lt;p&gt;
Obviously I changed the wrong part.  As you can see I hardly know what I'm doing, but this seems to be a valid complaint.
&lt;/p&gt;
</description>
      <category>editedticket</category>
    </item><item>
      <title>Ticket #1707 (Default rewrite rules do not work with non-standard http-port urls) updated</title>
      
        <dc:creator>mark</dc:creator>

      <pubDate>Sun, 25 Sep 2005 19:15:53 GMT</pubDate>
      <link>http://core.trac.wordpress.org/ticket/1707</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/ticket/1707/1127675753000000</guid>
      <description>&lt;p&gt;
Today is not my day.  Ignore the diff.
&lt;/p&gt;
</description>
      <category>editedticket</category>
    </item><item>
      <title>Ticket #1707 (Default rewrite rules do not work with non-standard http-port urls) updated</title>
      
        <dc:creator>ryan</dc:creator>

      <pubDate>Sun, 25 Sep 2005 19:11:27 GMT</pubDate>
      <link>http://core.trac.wordpress.org/ticket/1707</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/ticket/1707/1127675487000000</guid>
      <description>&lt;i&gt;Owner&lt;/i&gt; changed&lt;br/&gt;</description>
      <category>editedticket</category>
    </item><item>
      <title>classes.php.diff attached to Ticket #1707</title>
      
        <dc:creator>mark</dc:creator>

      <pubDate>Sun, 25 Sep 2005 18:59:40 GMT</pubDate>
      <link>http://core.trac.wordpress.org/attachment/ticket/1707/classes.php.diff</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/attachment/ticket/1707/classes.php.diff/1127674780000000</guid>
      <description></description>
      <category>attachment</category>
    </item><item>
      <title>Ticket #1707 (Default rewrite rules do not work with non-standard http-port urls) created</title>
      
        <dc:creator>mark</dc:creator>

      <pubDate>Sun, 25 Sep 2005 18:58:57 GMT</pubDate>
      <link>http://core.trac.wordpress.org/ticket/1707</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/ticket/1707/1127674737000000</guid>
      <description>&lt;p&gt;
On my home server I'm forced to use a non-standard http (port 81).  The default rewrite rules located in classes.php are not specific enough to support this.  The new default rewrite rules use ${REQUEST_URI} to construct a full url including port if specified. Attached is a patch of the changes necessary.  Server is running Apache 2.0.54-&lt;a class="changeset" href="http://core.trac.wordpress.org/changeset/31" title="New admin interface start, quicktag bug fix.
"&gt;r31&lt;/a&gt;.
&lt;/p&gt;
</description>
      <category>newticket</category>
    </item><item>
      <title>functions-formatting.php attached to Ticket #1706</title>
      
        <dc:creator>rockinfree</dc:creator>

      <pubDate>Sun, 25 Sep 2005 02:12:56 GMT</pubDate>
      <link>http://core.trac.wordpress.org/attachment/ticket/1706/functions-formatting.php</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/attachment/ticket/1706/functions-formatting.php/1127614376000000</guid>
      <description>&lt;p&gt;
Fixed version of file with line 75 in wpautop() updated (sorry, no diff on this system)
&lt;/p&gt;
</description>
      <category>attachment</category>
    </item><item>
      <title>Ticket #1706 (wpautop() not stripping &lt;br /&gt; tags before &lt;p withattributes&gt;) created</title>
      
        <dc:creator>rockinfree</dc:creator>

      <pubDate>Sun, 25 Sep 2005 02:10:23 GMT</pubDate>
      <link>http://core.trac.wordpress.org/ticket/1706</link>
      <guid isPermaLink="false">http://core.trac.wordpress.org/ticket/1706/1127614223000000</guid>
      <description>&lt;pre class="wiki"&gt;&amp;lt;hr /&amp;gt;&amp;lt;p&amp;gt;blah
blah
blah&amp;lt;/p&amp;gt;
&amp;lt;hr /&amp;gt;&amp;lt;p class="center"&amp;gt;blah
blah
blah&amp;lt;/p&amp;gt;
&lt;/pre&gt;&lt;p&gt;
Entered through the wp-admin/post.php page should become:
&lt;/p&gt;
&lt;pre class="wiki"&gt;	&amp;lt;hr /&amp;gt;
&amp;lt;p&amp;gt;blah&amp;lt;br /&amp;gt;
blah&amp;lt;br /&amp;gt;
blah&amp;lt;/p&amp;gt;
	&amp;lt;hr /&amp;gt;
&amp;lt;p class="center"&amp;gt;blah&amp;lt;br /&amp;gt;
blah&amp;lt;br /&amp;gt;
blah&amp;lt;/p&amp;gt;
&lt;/pre&gt;&lt;p&gt;
On the generated page (after being processed by wpautop()), but instead becomes:
&lt;/p&gt;
&lt;pre class="wiki"&gt;	&amp;lt;hr /&amp;gt;
&amp;lt;p&amp;gt;blah&amp;lt;br /&amp;gt;
blah&amp;lt;br /&amp;gt;
blah&amp;lt;/p&amp;gt;
	&amp;lt;hr /&amp;gt;&amp;lt;br /&amp;gt;
&amp;lt;p class="center"&amp;gt;blah&amp;lt;br /&amp;gt;
blah&amp;lt;br /&amp;gt;
blah&amp;lt;/p&amp;gt;
&lt;/pre&gt;&lt;p&gt;
(note the extra &amp;lt;br /&amp;gt; after the second &amp;lt;hr /&amp;gt; tag)
&lt;/p&gt;
&lt;p&gt;
The error is caused in functions-formatting.php wpautop():
&lt;/p&gt;
&lt;pre class="wiki"&gt;$pee = preg_replace('!&amp;lt;br /&amp;gt;(\s*&amp;lt;/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)&amp;gt;)!', '$1', $pee);
&lt;/pre&gt;&lt;p&gt;
should be:
&lt;/p&gt;
&lt;pre class="wiki"&gt;$pee = preg_replace('!&amp;lt;br /&amp;gt;(\s*&amp;lt;/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)[^&amp;gt;]*&amp;gt;)!', '$1', $pee);
&lt;/pre&gt;&lt;p&gt;
(Note that the original regexp is missing the [&lt;sup&gt;&amp;gt;]*, which is present for all other patterns in this function, and is necessary to allow, for example, &amp;lt;p class="center"&amp;gt; as in the repro case.)
&lt;/sup&gt;&lt;/p&gt;
</description>
      <category>newticket</category>
    </item>
   </channel>
</rss>